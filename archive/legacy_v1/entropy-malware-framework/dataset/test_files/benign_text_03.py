"""
Word frequency counter that ignores basic punctuation and capitalizes properly.
"""

def clean_word(word):
    valid_chars = []
    for char in word:
        if char.isalpha() or char.isdigit():
            valid_chars.append(char.lower())
    return "".join(valid_chars)

def count_word_frequencies(text):
    words = text.split()
    frequency_map = {}
    
    for word in words:
        cleaned = clean_word(word)
        if cleaned:
            frequency_map[cleaned] = frequency_map.get(cleaned, 0) + 1
            
    return frequency_map

def top_n_words(frequency_map, n=5):
    sorted_items = sorted(frequency_map.items(), key=lambda x: x[1], reverse=True)
    return sorted_items[:n]

def text_summary(text):
    freq = count_word_frequencies(text)
    top_words = top_n_words(freq, 3)
    word_count = sum(freq.values())
    unique_words = len(freq)
    
    return {
        "total_words": word_count,
        "unique_words": unique_words,
        "top_words": top_words
    }

if __name__ == "__main__":
    sample_paragraph = "hello world! this is a test. hello python, hello world."
    print("summary:", text_summary(sample_paragraph))
