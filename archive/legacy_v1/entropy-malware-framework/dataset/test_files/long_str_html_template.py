
"""
Simple HTML Templating Engine
Generates basic status pages.
"""

class PageGenerator:
    def __init__(self, title="Status Page"):
        self.title = title
        self.meta_tags = []
        self.body_content = ""

    def add_meta(self, name, content):
        self.meta_tags.append(f'<meta name="{name}" content="{content}">')

    def set_content(self, text):
        self.body_content = text

    def render(self):
        # A very long single-line string representing a complex CSS style block
        style_block = "<style>body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background-color:#f0f2f5;margin:0;padding:20px;color:#333;}.container{max-width:800px;margin:0 auto;background:#fff;padding:40px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);}.header{border-bottom:1px solid #eee;padding-bottom:20px;margin-bottom:20px;}.footer{margin-top:40px;padding-top:20px;border-top:1px solid #eee;color:#777;font-size:0.9em;text-align:center;}.btn{display:inline-block;padding:10px 20px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px;transition:background-color 0.3s;}.btn:hover{background-color:#0056b3;}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px;}.alert-success{color:#155724;background-color:#d4edda;border-color:#c3e6cb;}.alert-danger{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb;}</style>"
        
        # Another long string for a JavaScript tracking snippet dummy
        script_block = '<script>function trackPageView(){var d=document,s="script",id="analytics-js";var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://cdn.example.com/analytics.js?v=2.4.1&token=abcdef1234567890";fjs.parentNode.insertBefore(js,fjs);window.analytics=window.analytics||[];window.analytics.push(["track","pageview",new Date().getTime()]);console.log("Analytics initialized successfully.");}trackPageView();</script>'

        head_content = f"<head><title>{self.title}</title>{''.join(self.meta_tags)}{style_block}{script_block}</head>"
        
        # Construct the final HTML
        html = f"<!DOCTYPE html><html>{head_content}<body><div class='container'><div class='header'><h1>{self.title}</h1></div><div class='content'>{self.body_content}</div><div class='footer'>&copy; 2024 Company Inc. All rights reserved. <a href='/privacy'>Privacy Policy</a> | <a href='/terms'>Terms of Service</a></div></div></body></html>"
        
        return html

def build_report():
    gen = PageGenerator("Monthly System Report")
    gen.add_meta("description", "Automated system health check report generated by the monitoring service.")
    gen.add_meta("viewport", "width=device-width, initial-scale=1.0")
    
    # Long text for body content
    report_text = "<p>The system has been running for 30 days without interruption. All services are operational. Disk usage is at 45%. Memory usage is stable at 60%. CPU load average is 0.5. No critical errors have been logged in the past 24 hours. The automated backup completed successfully at 03:00 AM UTC. Please review the attached logs for more detailed information regarding network traffic and database performance metrics.</p><div class='alert alert-success'>System Health: Optimal</div><a href='#' class='btn'>Download Full Report</a>"
    
    gen.set_content(report_text)
    
    output = gen.render()
    print(f"Generated HTML size: {len(output)} bytes")
    # print(output) # Commented out to reduce console spam

if __name__ == "__main__":
    build_report()
