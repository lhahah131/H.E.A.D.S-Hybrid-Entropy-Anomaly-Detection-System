"""
A simple pure python implementation for reading csv data 
without using the built in csv module. parses lines into dictionaries.
"""

def parse_csv_line(line, delimiter=","):
    parts = []
    current = ""
    in_quotes = False
    
    for char in line:
        if char == '"':
            in_quotes = not in_quotes
        elif char == delimiter and not in_quotes:
            parts.append(current.strip())
            current = ""
        else:
            current += char
            
    parts.append(current.strip())
    return [p.strip('"') for p in parts]

def read_simple_csv(file_content):
    lines = file_content.strip().split('\n')
    if not lines:
        return []
    
    headers = parse_csv_line(lines[0])
    data = []
    
    for line in lines[1:]:
        if not line.strip():
            continue
        values = parse_csv_line(line)
        row = {}
        for i, header in enumerate(headers):
            if i < len(values):
                row[header] = values[i]
            else:
                row[header] = None
        data.append(row)
        
    return data

if __name__ == "__main__":
    csv_str = "name,age,city\\nalice,30,new york\\nbob,25,los angeles"
    result = read_simple_csv(csv_str)
    print("parsed data:", result)
