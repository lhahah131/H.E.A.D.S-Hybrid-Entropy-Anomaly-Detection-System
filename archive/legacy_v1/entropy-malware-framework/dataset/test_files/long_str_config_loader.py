
"""
Configuration Loader Module
Handles loading of application settings from predefined strings.
Contains extensive default configuration data.
"""

class ConfigLoader:
    def __init__(self, use_defaults=True):
        self.use_defaults = use_defaults
        self.config_data = {}
        
        # Long string injection: Default XML template configuration
        self.default_xml_template = """
        <?xml version="1.0" encoding="UTF-8"?>
        <configuration>
            <app_name>EnterpriseResourcePlanner</app_name>
            <version>12.5.3-release-candidate-final-build-2024</version>
            <modules>
                <module name="Finance" enabled="true" priority="high">
                    <settings>
                        <currency>USD</currency>
                        <formatting>standard</formatting>
                        <audit_log>enabled</audit_log>
                        <permissions>read,write,admin</permissions>
                        <reporting_interval>daily</reporting_interval>
                    </settings>
                </module>
                <module name="HR" enabled="false" priority="low">
                    <settings>
                        <employee_limit>1000</employee_limit>
                        <data_retention>5years</data_retention>
                        <privacy_compliance>GDPR</privacy_compliance>
                    </settings>
                </module>
                <module name="Inventory" enabled="true" priority="medium">
                    <settings>
                        <warehouse_count>5</warehouse_count>
                        <logic_mode>FIFO</logic_mode>
                        <alert_threshold>10</alert_threshold>
                    </settings>
                </module>
            </modules>
            <server>
                <host>production-server-01.internal.network.corp</host>
                <port>8080</port>
                <timeout>30000</timeout>
                <retry_policy>exponential_backoff</retry_policy>
                <max_connections>5000</max_connections>
            </server>
            <logging>
                <level>INFO</level>
                <destination>/var/log/enterprise-app/application.log</destination>
                <rotation>daily</rotation>
                <format>%d{ISO8601} [%t] %-5p %c %x - %m%n</format>
                <retention_days>30</retention_days>
            </logging>
        </configuration>
        """
        # End of XML template

    def load_defaults(self):
        """Loads the massive default configuration string."""
        if self.use_defaults:
            # Another long string for JSON schema definition (dummy)
            self.schema_definition = '{"type":"object","properties":{"user":{"type":"string","minLength":5,"maxLength":20},"password":{"type":"string","pattern":"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$"},"email":{"type":"string","format":"email"},"role":{"type":"string","enum":["admin","user","guest"]},"preferences":{"type":"object","properties":{"theme":{"type":"string","enum":["dark","light"]},"notifications":{"type":"boolean"}}},"history":{"type":"array","items":{"type":"object","properties":{"action":{"type":"string"},"timestamp":{"type":"integer"},"details":{"type":"string"}}}}}}'
            
            print("Defaults loaded.")
            return True
        return False

    def get_template_length(self):
        return len(self.default_xml_template)

    def validate_schema(self, data):
        """Mock validation against the long schema string."""
        # This is just a dummy check
        if "user" in data and len(self.schema_definition) > 100:
            return True
        return False

    def _internal_processing(self):
        # A very long dummy error message constant
        ERROR_MSG_500 = "Critical System Failure: The operation could not be completed because the allocated memory buffer for the transaction processing unit has exceeded its maximum capacity. Please contact the system administrator immediately with error code 0x89AB45CD. Do not attempt to restart the service manually as this may cause data corruption in the persistent storage layer. Refer to the troubleshooting guide section 4.2 paragraph 3 for more details on handle leaks and memory fragmentation issues."
        return ERROR_MSG_500

def initialize_system():
    loader = ConfigLoader()
    loader.load_defaults()
    print(f"Template Size: {loader.get_template_length()} chars")
    
    res = loader._internal_processing()
    print(f"Error Message: {res[:50]}...")

if __name__ == "__main__":
    initialize_system()
