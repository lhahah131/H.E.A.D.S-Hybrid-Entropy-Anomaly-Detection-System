"""
Todo list application logic.
Manages tasks, categories, and completion states without persistence.
"""

class TodoTask:
    def __init__(self, task_id, title, description, priority="normal"):
        self.task_id = task_id
        self.title = title
        self.description = description
        self.priority = priority
        self.is_completed = False

    def complete(self):
        self.is_completed = True

    def uncomplete(self):
        self.is_completed = False

    def edit(self, title=None, description=None, priority=None):
        if title:
            self.title = title
        if description:
            self.description = description
        if priority:
            self.priority = priority

    def __str__(self):
        status = "[x]" if self.is_completed else "[ ]"
        return f"{status} {self.title} (priority: {self.priority})"

class TaskManager:
    def __init__(self):
        self.tasks = []
        self.task_counter = 0

    def add_task(self, title, description="", priority="normal"):
        self.task_counter += 1
        new_task = TodoTask(self.task_counter, title, description, priority)
        self.tasks.append(new_task)
        return self.task_counter

    def get_task(self, task_id):
        for task in self.tasks:
            if task.task_id == task_id:
                return task
        return None

    def remove_task(self, task_id):
        task = self.get_task(task_id)
        if task:
            self.tasks.remove(task)
            return True
        return False

    def mark_completed(self, task_id):
        task = self.get_task(task_id)
        if task:
            task.complete()
            return True
        return False

    def get_pending_tasks(self):
        return [task for task in self.tasks if not task.is_completed]

    def get_completed_tasks(self):
        return [task for task in self.tasks if task.is_completed]

    def list_all_tasks(self):
        return self.tasks

    def get_statistics(self):
        total = len(self.tasks)
        completed = len(self.get_completed_tasks())
        pending = len(self.get_pending_tasks())
        
        high_priority = len([t for t in self.tasks if t.priority == "high"])
        
        return {
            "total_tasks": total,
            "completed": completed,
            "pending": pending,
            "high_priority": high_priority
        }

if __name__ == "__main__":
    manager = TaskManager()
    t1 = manager.add_task("buy groceries", "milk, bread, eggs", "high")
    t2 = manager.add_task("pay bills", "electricity and water", "high")
    t3 = manager.add_task("clean house", "vacuum and dust", "normal")
    
    manager.mark_completed(t1)
    
    print(f"tasks pending: {len(manager.get_pending_tasks())}")
    for task in manager.list_all_tasks():
        print(task)
